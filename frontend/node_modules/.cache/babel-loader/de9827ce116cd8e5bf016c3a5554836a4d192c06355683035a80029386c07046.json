{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Form,Button,Row,Col,Container}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import Message from'../screens/Message';import Loader from'../screens/Loader';import{useGetAllOrdersQuery}from'../app/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AllOrders=function AllOrders(_ref){var location=_ref.location,history=_ref.history;//   const [name, setName] = useState('')\n//   const [email, setEmail] = useState('')\n//   const [password, setPassword] = useState('')\n//   const [confirmPassword, setConfirmPassword] = useState('')\n//   const [message, setMessage] = useState(null)\n//   const {refetch} = useGetMyOrdersQuery();\n//   let updateResponse;\n//   const navigate = useNavigate();\n//   let userInfo;\n//   useEffect(() => {\n//   if (localStorage.getItem('userInfo') === null) {\n//         navigate('/login')\n//   }\n//   else{\n//     userInfo=JSON.parse(localStorage.getItem('userInfo'))\n//     setName(userInfo.name)\n//     setEmail(userInfo.email)\n//     refetch();\n//   }\n// },[userInfo])\n// const {refetch} = useGetMyOrdersQuery();\n//   const orderListMy = useSelector((state) => state.orderListMy)\n//   const {data,isLoading,error,isSuccess,isError}=useGetProfileQuery();\n//   isSuccess && console.log(data)\n//   isError && console.log(\"error\")\n//   const myordersresponse=useGetMyOrdersQuery();\n//   console.log(myordersresponse.data)\n//   const[updateUser,updateUserResponse]=useUpdateProfileMutation();\n//   updateUserResponse.isError && console.log(updateUserResponse.error)\n// isSuccess && console.log(\"success\",data)\n//   useEffect(() => {\n//     if (!userInfo) {\n//       history.push('/login')\n//     } else {\n//       if (!user || !user.name || success) {\n//         dispatch({ type: USER_UPDATE_PROFILE_RESET })\n//         dispatch(getUserDetails('profile'))\n//         dispatch(listMyOrders())\n//       } else {\n//         setName(user.name)\n//         setEmail(user.email)\n//       }\n//     }\n//   }, [dispatch, history, userInfo, user, success])\n//   const submitHandler = async (e) => {\n//     e.preventDefault()\n//     if (password !== confirmPassword) {\n//       setMessage('Passwords do not match')\n//     } else {\n//       const formData={name,email,password}\n//       updateResponse=await updateUser(formData);\n//       console.log(\"update\",updateUserResponse.data)\n//     }\n//   }\n//   if(updateUserResponse.isSuccess){\n//     localStorage.setItem('userInfo',JSON.stringify(updateUserResponse.data))\n//     navigate(0)\n//     }\n// let changeEmail=(e)=>{\n// console.log(\"mail\",email)\n// }\nvar _useGetAllOrdersQuery=useGetAllOrdersQuery(),data=_useGetAllOrdersQuery.data,isLoading=_useGetAllOrdersQuery.isLoading,error=_useGetAllOrdersQuery.error,isSuccess=_useGetAllOrdersQuery.isSuccess,isError=_useGetAllOrdersQuery.isError;return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:12,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),isLoading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error.data.message}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"USER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[console.log(data),data.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Details\"})})})]},order._id);})]})]})]})})});};export default AllOrders;","map":{"version":3,"names":["React","useState","useEffect","Table","Form","Button","Row","Col","Container","LinkContainer","Message","Loader","useGetAllOrdersQuery","useNavigate","jsx","_jsx","jsxs","_jsxs","AllOrders","_ref","location","history","_useGetAllOrdersQuery","data","isLoading","error","isSuccess","isError","children","md","variant","message","striped","bordered","hover","responsive","className","console","log","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","style","color","isDelivered","deliveredAt","to","concat"],"sources":["/Users/raghu/Downloads/ecomstore-master/frontend/src/screens/AllOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Table, Form, Button, Row, Col,Container } from 'react-bootstrap'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport Message from '../screens/Message'\nimport Loader from '../screens/Loader'\nimport { useGetAllOrdersQuery } from '../app/api'\nimport { useNavigate } from 'react-router-dom';\n\nconst AllOrders = ({ location, history }) => {\n//   const [name, setName] = useState('')\n//   const [email, setEmail] = useState('')\n//   const [password, setPassword] = useState('')\n//   const [confirmPassword, setConfirmPassword] = useState('')\n//   const [message, setMessage] = useState(null)\n \n//   const {refetch} = useGetMyOrdersQuery();\n//   let updateResponse;\n\n//   const navigate = useNavigate();\n//   let userInfo;\n//   useEffect(() => {\n//   if (localStorage.getItem('userInfo') === null) {\n//         navigate('/login')\n//   }\n//   else{\n//     userInfo=JSON.parse(localStorage.getItem('userInfo'))\n//     setName(userInfo.name)\n//     setEmail(userInfo.email)\n//     refetch();\n//   }\n\n// },[userInfo])\n\n\n// const {refetch} = useGetMyOrdersQuery();\n//   const orderListMy = useSelector((state) => state.orderListMy)\n//   const {data,isLoading,error,isSuccess,isError}=useGetProfileQuery();\n//   isSuccess && console.log(data)\n//   isError && console.log(\"error\")\n//   const myordersresponse=useGetMyOrdersQuery();\n//   console.log(myordersresponse.data)\n//   const[updateUser,updateUserResponse]=useUpdateProfileMutation();\n\n//   updateUserResponse.isError && console.log(updateUserResponse.error)\n\n// isSuccess && console.log(\"success\",data)\n\n//   useEffect(() => {\n//     if (!userInfo) {\n//       history.push('/login')\n//     } else {\n//       if (!user || !user.name || success) {\n//         dispatch({ type: USER_UPDATE_PROFILE_RESET })\n//         dispatch(getUserDetails('profile'))\n//         dispatch(listMyOrders())\n//       } else {\n//         setName(user.name)\n//         setEmail(user.email)\n//       }\n//     }\n//   }, [dispatch, history, userInfo, user, success])\n//   const submitHandler = async (e) => {\n//     e.preventDefault()\n//     if (password !== confirmPassword) {\n//       setMessage('Passwords do not match')\n//     } else {\n//       const formData={name,email,password}\n//       updateResponse=await updateUser(formData);\n//       console.log(\"update\",updateUserResponse.data)\n//     }\n//   }\n\n//   if(updateUserResponse.isSuccess){\n//     localStorage.setItem('userInfo',JSON.stringify(updateUserResponse.data))\n//     navigate(0)\n//     }\n\n\n  // let changeEmail=(e)=>{\n    // console.log(\"mail\",email)\n  // }\n\n\n    const {data,isLoading,error,isSuccess,isError}=useGetAllOrdersQuery();\n\n  return (\n    <Container>\n    <Row>\n      <Col md={12}>\n        <h2>My Orders</h2>\n         {isLoading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant='danger'>{error.data.message}</Message>\n        ) : (\n          <Table striped bordered hover responsive className='table-sm'>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>USER</th>\n                <th>DATE</th>\n                <th>TOTAL</th>\n                <th>PAID</th>\n                <th>DELIVERED</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {console.log(data)}\n              {data.map((order) => (\n                <tr key={order._id}>\n                  <td>{order._id}</td>\n                  <td>{order.user && order.user.name}</td>\n                  <td>{order.createdAt.substring(0, 10)}</td>\n                  <td>{order.totalPrice}</td>\n                  <td>\n                    {order.isPaid ? (\n                      order.paidAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    {order.isDelivered ? (\n                      order.deliveredAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    <LinkContainer to={`/order/${order._id}`}>\n                      <Button className='btn-sm' variant='light'>\n                        Details\n                      </Button>\n                    </LinkContainer>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        )}\n      </Col>\n    </Row>\n    </Container>\n  )\n}\n\nexport default AllOrders"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}