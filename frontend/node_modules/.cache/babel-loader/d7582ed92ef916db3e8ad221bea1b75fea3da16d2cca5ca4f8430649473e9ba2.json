{"ast":null,"code":"import _slicedToArray from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Container}from'react-bootstrap';import Message from'./Message';import Loader from'../components/Loader';import{useGetUsersQuery}from'../app/api';import{useDeleteUserMutation}from'../app/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserListScreen=function UserListScreen(_ref){var history=_ref.history;//   const dispatch = useDispatch()\n//   const userList = useSelector((state) => state.userList)\n//   const { loading, error, users } = userList\n//   const userLogin = useSelector((state) => state.userLogin)\n//   const { userInfo } = userLogin\n//   const userDelete = useSelector((state) => state.userDelete)\n//   const { success: successDelete } = userDelete\n//   useEffect(() => {\n//     if (userInfo && userInfo.isAdmin) {\n//       dispatch(listUsers())\n//     } else {\n//       history.push('/login')\n//     }\n//   }, [dispatch, history, successDelete, userInfo])\nvar deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure to delete this user')){console.log(id);deleteUser(id);}};// const editHandler=(id)=>{\n//                   console.log(\"userid\",id)\n// }\nvar _useGetUsersQuery=useGetUsersQuery(),data=_useGetUsersQuery.data,isLoading=_useGetUsersQuery.isLoading,error=_useGetUsersQuery.error,refetch=_useGetUsersQuery.refetch;// error & console.log(error)\nvar _useDeleteUserMutatio=useDeleteUserMutation(),_useDeleteUserMutatio2=_slicedToArray(_useDeleteUserMutatio,2),deleteUser=_useDeleteUserMutatio2[0],deleteUserResponse=_useDeleteUserMutatio2[1];deleteUserResponse.isSuccess&&refetch();// deleteUserResponse.isSuccess && console.log(deleteUser.isSuccess)\nreturn/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),isLoading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error.data.message}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(user.email),children:user.email})}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user._id);})})]})]});};export default UserListScreen;","map":{"version":3,"names":["React","LinkContainer","Table","Button","Container","Message","Loader","useGetUsersQuery","useDeleteUserMutation","jsx","_jsx","jsxs","_jsxs","UserListScreen","_ref","history","deleteHandler","id","window","confirm","console","log","deleteUser","_useGetUsersQuery","data","isLoading","error","refetch","_useDeleteUserMutatio","_useDeleteUserMutatio2","_slicedToArray","deleteUserResponse","isSuccess","children","variant","message","striped","bordered","hover","responsive","className","map","user","_id","name","href","concat","email","isAdmin","style","color","to","onClick"],"sources":["/Users/raghu/Downloads/ecomstore-master/frontend/src/screens/UserListScreen.js"],"sourcesContent":["import React from 'react'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Table, Button, Container } from 'react-bootstrap'\nimport Message from './Message'\nimport Loader from '../components/Loader'\nimport { useGetUsersQuery } from '../app/api'\nimport { useDeleteUserMutation } from '../app/api'\n\nconst UserListScreen = ({ history }) => {\n//   const dispatch = useDispatch()\n\n//   const userList = useSelector((state) => state.userList)\n//   const { loading, error, users } = userList\n\n//   const userLogin = useSelector((state) => state.userLogin)\n//   const { userInfo } = userLogin\n\n//   const userDelete = useSelector((state) => state.userDelete)\n//   const { success: successDelete } = userDelete\n\n//   useEffect(() => {\n//     if (userInfo && userInfo.isAdmin) {\n//       dispatch(listUsers())\n//     } else {\n//       history.push('/login')\n//     }\n//   }, [dispatch, history, successDelete, userInfo])\n\n  const deleteHandler = (id) => {\n    if (window.confirm('Are you sure to delete this user')) {\n        console.log(id)\n      deleteUser(id)\n    }\n  }\n\n  // const editHandler=(id)=>{\n  //                   console.log(\"userid\",id)\n  // }\n\nconst {data,isLoading,error,refetch}=useGetUsersQuery();\n// error & console.log(error)\nconst [deleteUser,deleteUserResponse]=useDeleteUserMutation();\n\ndeleteUserResponse.isSuccess && refetch()\n// deleteUserResponse.isSuccess && console.log(deleteUser.isSuccess)\n\nreturn (\n    <Container>\n      <h1>Users</h1>\n      {isLoading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant='danger'>{error.data.message}</Message>\n      ) : (\n        <Table striped bordered hover responsive className='table-sm'>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>NAME</th>\n              <th>EMAIL</th>\n              <th>ADMIN</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.map((user) => (\n              <tr key={user._id}>\n                <td>{user._id}</td>\n                <td>{user.name}</td>\n                <td>\n                  <a href={`mailto:${user.email}`}>{user.email}</a>\n                </td>\n                <td>\n                  {user.isAdmin ? (\n                    <i className='fas fa-check' style={{ color: 'green' }}></i>\n                  ) : (\n                    <i className='fas fa-times' style={{ color: 'red' }}></i>\n                  )}\n                </td>\n                <td>\n                  <LinkContainer to={`/admin/user/${user._id}/edit`}>\n                    <Button variant='light' className='btn-sm'>\n                      <i className='fas fa-edit'></i>\n                    </Button>\n                  </LinkContainer>\n                  <Button\n                    variant='danger'\n                    className='btn-sm'\n                    onClick={() => deleteHandler(user._id)}\n                  >\n                    <i className='fas fa-trash'></i>\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </Container>\n  )\n}\n\nexport default UserListScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}