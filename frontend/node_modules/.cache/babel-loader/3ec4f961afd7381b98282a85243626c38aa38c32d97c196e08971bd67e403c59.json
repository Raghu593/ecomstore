{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import Message from'../screens/Message';import Loader from'../components/Loader';import FormContainer from'../components/FormContainer';import{useLoginUserMutation}from'../app/api';import{useNavigate,useSearchParams}from'react-router-dom';import{brandcolor}from'../components/brandcolor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginScreen=function LoginScreen(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// const userLogin = useSelector((state) => state.userLogin)\n// const {data,isLoading,isFetching,error,isError,isSuccess}=useLoginUserMutation(email,password);\nvar _useLoginUserMutation=useLoginUserMutation(),_useLoginUserMutation2=_slicedToArray(_useLoginUserMutation,2),loginUser=_useLoginUserMutation2[0],_useLoginUserMutation3=_useLoginUserMutation2[1],isLoading=_useLoginUserMutation3.isLoading,error=_useLoginUserMutation3.error,data=_useLoginUserMutation3.data,isSuccess=_useLoginUserMutation3.isSuccess;// const redirect = location.search ? location.search.split('=')[1] : '/'\nvar _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var redirect=searchParams.get(\"redirect\");isSuccess&&localStorage.setItem('userInfo',JSON.stringify(data));useEffect(function(){if(localStorage.getItem('userInfo')!==null){navigate(\"/\".concat(redirect));}},[redirect]);// [history, userInfo, redirect]\nif(isSuccess&&redirect){navigate(\"/\".concat(redirect));}else if(isSuccess){navigate('/');}// const {refetch} = useGetMyOrdersQuery(skipToken);\n// isSuccess && refetch()\nvar submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();formData={email:email,password:password};_context.next=4;return loginUser(formData);case 4:case\"end\":return _context.stop();}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:brandcolor},children:\"Sign In\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error.data.message}),isLoading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",style:{color:brandcolor},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"New Customer?\",' ',/*#__PURE__*/_jsx(Link,{to:redirect?\"/register?redirect=\".concat(redirect):'/register',style:{color:brandcolor},children:\"Register\"})]})})]});};export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","Form","Button","Row","Col","Message","Loader","FormContainer","useLoginUserMutation","useNavigate","useSearchParams","brandcolor","jsx","_jsx","jsxs","_jsxs","LoginScreen","navigate","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useLoginUserMutation","_useLoginUserMutation2","loginUser","_useLoginUserMutation3","isLoading","error","data","isSuccess","_useSearchParams","_useSearchParams2","searchParams","redirect","get","localStorage","setItem","JSON","stringify","getItem","concat","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","formData","wrap","_callee$","_context","prev","next","preventDefault","stop","_x","apply","arguments","children","style","color","variant","message","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","className","to"],"sources":["/Users/raghu/Downloads/ecomstore-master/frontend/src/screens/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Form, Button, Row, Col } from 'react-bootstrap'\nimport Message from '../screens/Message'\nimport Loader from '../components/Loader'\nimport FormContainer from '../components/FormContainer'\nimport { useLoginUserMutation } from '../app/api'\nimport { useNavigate,useSearchParams} from 'react-router-dom';\nimport { brandcolor } from '../components/brandcolor'\n\n  const LoginScreen = () => {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n\n\n  // const userLogin = useSelector((state) => state.userLogin)\n  // const {data,isLoading,isFetching,error,isError,isSuccess}=useLoginUserMutation(email,password);\n  const[loginUser,{isLoading,error,data,isSuccess}]=useLoginUserMutation();\n  // const redirect = location.search ? location.search.split('=')[1] : '/'\n  const [searchParams] = useSearchParams();\n  const redirect = searchParams.get(\"redirect\");\n  isSuccess && localStorage.setItem('userInfo',JSON.stringify(data))\n\n\n  useEffect(() => {\n    if (localStorage.getItem('userInfo') !== null) {\n      navigate(`/${redirect}`)\n    }\n  }, [redirect])\n\n  // [history, userInfo, redirect]\n  if(isSuccess && redirect){\n    navigate(`/${redirect}`)\n  }\n  else if(isSuccess){\n    navigate('/')\n  }\n\n  // const {refetch} = useGetMyOrdersQuery(skipToken);\n  // isSuccess && refetch()\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    const formData={email,password}\n    await loginUser(formData);\n  }\n\n  return (\n    <FormContainer>\n      <h1 style={{color:brandcolor}}>Sign In</h1>\n      {error && <Message variant='danger'>{error.data.message}</Message>}\n      {/* <Message>Hello</Message> */}\n      {isLoading && <Loader />}\n      {/* {res} */}\n      <Form onSubmit={submitHandler}>\n        <Form.Group controlId='email'>\n          <Form.Label>Email Address</Form.Label>\n          <Form.Control\n            type='email'\n            placeholder='Enter email'\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='password'>\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type='password'\n            placeholder='Enter password'\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          ></Form.Control>\n        </Form.Group>\n        <Button type='submit' variant='primary' style={{color:brandcolor}}>\n          Sign In\n        </Button>\n      </Form>\n      <Row className='py-3'>\n        <Col>\n          New Customer?{' '}\n          <Link to={redirect ? `/register?redirect=${redirect}` : '/register'} style={{color:brandcolor}}>\n            Register\n          </Link>\n        </Col>\n      </Row>\n    </FormContainer>\n  )\n}\n\nexport default LoginScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}