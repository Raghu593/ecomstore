{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/raghu/Downloads/ecomstore-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'./Message';import Loader from'../components/Loader';import FormContainer from'../components/FormContainer';import{useGetUserByIdQuery,useUpdateUserByIdMutation}from'../app/api';import{useNavigate,useParams}from'react-router-dom';import{skipToken}from'@reduxjs/toolkit/dist/query';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserEditScreen=function UserEditScreen(){var params=useParams();var id=params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),skip=_useState8[0],setskip=_useState8[1];var navigate=useNavigate();var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();formData={name:name,email:email,id:id,isAdmin:isAdmin};// console.log(formData)\n_context.next=4;return updateUser(formData);case 4:case\"end\":return _context.stop();}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();var _useGetUserByIdQuery=useGetUserByIdQuery(id,{skip:skip}),data=_useGetUserByIdQuery.data,isLoading=_useGetUserByIdQuery.isLoading,isFetching=_useGetUserByIdQuery.isFetching,error=_useGetUserByIdQuery.error,isError=_useGetUserByIdQuery.isError,isSuccess=_useGetUserByIdQuery.isSuccess,refetch=_useGetUserByIdQuery.refetch;var _useUpdateUserByIdMut=useUpdateUserByIdMutation(),_useUpdateUserByIdMut2=_slicedToArray(_useUpdateUserByIdMut,2),updateUser=_useUpdateUserByIdMut2[0],updateUserResponse=_useUpdateUserByIdMut2[1];//  console.log(updateUserResponse.isSuccess)\nuseEffect(function(){setskip(false);if(isSuccess){setName(data.name);setEmail(data.email);setIsAdmin(data.isAdmin);}// if(updateUserResponse.isSuccess){\n//   // setskip(true)\n//   // refetch()      \n//   navigate('/admin/userlist')\n// }\n},[isSuccess]);// const {data,isLoading,error}=useGetProfileQuery();\n//  const [getUser,getUserResponse]=useGetUserByIdQuery();\n//  console.log(getUser)\n// if(isSuccess){\n//       console.log(\"data\",data)\n//  }\nvar userInfo;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist\",className:\"btn btn-light my-3\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit User\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"isadmin\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",onClick:submitHandler,children:\"Update\"})]})]})]})});};export default UserEditScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","Form","Button","useDispatch","useSelector","Message","Loader","FormContainer","useGetUserByIdQuery","useUpdateUserByIdMutation","useNavigate","useParams","skipToken","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserEditScreen","params","id","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","isAdmin","setIsAdmin","_useState7","_useState8","skip","setskip","navigate","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","formData","wrap","_callee$","_context","prev","next","preventDefault","updateUser","stop","_x","apply","arguments","_useGetUserByIdQuery","data","isLoading","isFetching","error","isError","isSuccess","refetch","_useUpdateUserByIdMut","_useUpdateUserByIdMut2","updateUserResponse","userInfo","children","to","className","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","Check","label","checked","variant","onClick"],"sources":["/Users/raghu/Downloads/ecomstore-master/frontend/src/screens/UserEditScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Form, Button } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from './Message'\nimport Loader from '../components/Loader'\nimport FormContainer from '../components/FormContainer'\nimport { useGetUserByIdQuery,useUpdateUserByIdMutation } from '../app/api'\nimport { useNavigate ,useParams} from 'react-router-dom';\nimport { skipToken } from '@reduxjs/toolkit/dist/query'\n\n\nconst UserEditScreen = () => {\n\n  const params=useParams();\n  let id=params.id\n\n  const [name, setName] = useState('')\n  const [email, setEmail] = useState('')\n  const [isAdmin, setIsAdmin] = useState(false)\n  const [skip, setskip] = useState(true)\n\n  const navigate = useNavigate();\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    const formData={name,email,id,isAdmin}\n    // console.log(formData)\n    await updateUser(formData);\n    }\n\n\n  const {data,isLoading,isFetching,error,isError,isSuccess,refetch}=useGetUserByIdQuery(id,{\n    skip,\n  });\n  const [updateUser,updateUserResponse]=useUpdateUserByIdMutation();\n\n//  console.log(updateUserResponse.isSuccess)\n\n  useEffect(() => {\n    setskip(false)\n    if(isSuccess){\n      setName(data.name)\n      setEmail(data.email)\n      setIsAdmin(data.isAdmin)\n    }\n    // if(updateUserResponse.isSuccess){\n    //   // setskip(true)\n    //   // refetch()      \n    //   navigate('/admin/userlist')\n    // }\n  }, [isSuccess])\n\n\n  // const {data,isLoading,error}=useGetProfileQuery();\n    //  const [getUser,getUserResponse]=useGetUserByIdQuery();\n  //  console.log(getUser)\n\n// if(isSuccess){\n//       console.log(\"data\",data)\n//  }\n   \n    let userInfo;\n  \n\n\n\n  return (\n    <>\n     {/* {error && <Message variant='danger'>{error}</Message>} */}\n      {/* <Message>Hello</Message> */}\n      {/* {isLoading && <Loader />} */}\n      {/* {isSuccess &&  */}\n      <>\n      <Link to='/admin/userlist' className='btn btn-light my-3'>\n        Go Back\n      </Link>\n      <FormContainer>\n        <h1>Edit User</h1>\n        {/* {isLoading && <Loader />} */}\n        {/* {error && <Message variant='danger'>{error}</Message>} */}\n        {/* {isLoading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant='danger'>{error.data}</Message>\n        ) : ( */}\n          <Form onSubmit={submitHandler}>\n            <Form.Group controlId='name'>\n              <Form.Label>Name</Form.Label>\n              <Form.Control\n                type='name'\n                placeholder='Enter name'\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='email'>\n              <Form.Label>Email Address</Form.Label>\n              <Form.Control\n                type='email'\n                placeholder='Enter email'\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='isadmin'>\n              <Form.Check\n                type='checkbox'\n                label='Is Admin'\n                checked={isAdmin}\n                onChange={(e) => setIsAdmin(e.target.checked)}\n              ></Form.Check>\n            </Form.Group>\n\n            <Button type='submit' variant='primary' onClick={submitHandler}>\n              Update\n            </Button>\n          </Form>\n        {/* )} */}\n      </FormContainer>\n      </>\n{/* } */}\n    </>\n  )\n}\n\nexport default UserEditScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}